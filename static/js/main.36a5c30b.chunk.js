(this["webpackJsonpmi-chanchito-front"]=this["webpackJsonpmi-chanchito-front"]||[]).push([[0],{105:function(e,t,n){},113:function(e,t,n){},115:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(13),c=n.n(o),s=(n(105),n(17)),i=(n(80),(0,n(0).createContext)()),l=n(8),u={login:"[auth] login",logout:"[auth] signout"},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.login:return Object(l.a)(Object(l.a)({},t.payload),{},{logged:!0});case u.logout:return{logged:!1};default:return e}},j=n(35),b=n(10),p=n(149),f=n(158),h=n(7),m=n.n(h),O=n(14),x=n(152),g=n(153),v=n(154),y=n(169),w=n(23),k=n(40),T=n(41),C={dev:!1,backendUrl:{apiUrl:"https://mi-chanchito-back.herokuapp.com"}.apiUrl},S=function(){function e(){Object(k.a)(this,e),this.path="auth"}return Object(T.a)(e,[{key:"loginEmail",value:function(e){var t=this,n=e.email,a=e.password;return new Promise(function(){var e=Object(O.a)(m.a.mark((function e(r){var o,c,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o={email:n,password:a},e.next=4,fetch("".concat(C.backendUrl,"/").concat(t.path,"/login-email"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});case 4:return c=e.sent,e.next=7,c.json();case 7:return s=e.sent,console.log("data ",s),e.abrupt("return",r({success:!0,payload:s.user}));case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",r({error:e.t0}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}())}},{key:"signupEmail",value:function(e){var t=this,n=e.email,a=e.password;return new Promise(function(){var e=Object(O.a)(m.a.mark((function e(r){var o,c,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o={email:n,password:a},e.next=4,fetch("".concat(C.backendUrl,"/").concat(t.path,"/signup-email"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});case 4:return c=e.sent,e.next=7,c.json();case 7:return s=e.sent,console.log("data ",s),e.abrupt("return",r({success:!0,payload:[]}));case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",r({error:e.t0}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}())}},{key:"setLocalStorage",value:function(e){var t={email:e.email,profile:e.profile,token:e.token,expiresIn:e.expiresIn};console.log("userObj",t),localStorage.setItem("user",JSON.stringify(Object(l.a)({},t)))}}]),e}(),N=n(2),F=Object(p.a)((function(e){return{root:{"& > *":{margin:e.spacing(1),width:"300px"},display:"flex",flexDirection:"column",alignItems:"center"},loginTitle:{color:"#2E598C",textAlign:"center",fontWeight:"bold"},loginContent:{minWidth:"400px"},loginButtonContainer:{display:"flex",flexDirection:"column",alignItems:"center","& > *":{marginBottom:"10px"},"& > Button":{borderRadius:"5px",padding:"10px 15px",width:"300px",fontWeight:"500",boxShadow:"rgba(0,0,0,0.2) 1px 1px 5px 0"}},blueButton:{backgroundColor:"#2E598C",color:"white","&:hover":{backgroundColor:"#2E598C"}},whiteButton:{backgroundColor:"white",color:"#686868","&:hover":{backgroundColor:"#EBE9E9"}}}})),B=function(e){var t=e.onClose,n=e.open,r=F(),o=Object(a.useContext)(i).dispatch,c=new S,s=Object(b.g)(),u=Object(w.b)(),d=u.control,j=u.handleSubmit,p=u.formState.errors,h=function(){},k=function(){var e=Object(O.a)(m.a.mark((function e(t){var n,a,r,i,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.email,a=t.password,n){e.next=3;break}return e.abrupt("return");case 3:if(a){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,c.loginEmail({email:n,password:a});case 7:if(r=e.sent,i=r.error,l=r.payload,!i){e.next=12;break}return e.abrupt("return");case 12:console.log("response",l),console.log("dispatch",o),c.setLocalStorage(l),s.push("/dashboard/home");case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsxs)(x.a,{onClose:function(){t({})},"aria-labelledby":"simple-dialog-title",open:n,maxWidth:"xl",classes:{paper:r.loginContent},children:[Object(N.jsx)(g.a,{id:"simple-dialog-title",className:r.loginTitle,children:"Iniciar Sesi\xf3n"}),Object(N.jsx)(v.a,{children:Object(N.jsxs)("form",{className:r.root,noValidate:!0,autoComplete:"off",onSubmit:j((function(e){console.log("hola",e),k(e)})),children:[Object(N.jsx)(w.a,{name:"email",render:function(e){var t=e.field;return Object(N.jsx)(y.a,Object(l.a)(Object(l.a)({},t),{},{id:"email",name:"email",label:"Correo electronico",variant:"outlined",helperText:p.email?p.email.message:null,error:p.email}))},control:d,defaultValue:"",rules:{required:"Required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,message:"invalid email address"}}}),Object(N.jsx)(w.a,{name:"password",render:function(e){var t=e.field;return Object(N.jsx)(y.a,Object(l.a)(Object(l.a)({},t),{},{id:"password",name:"password",label:"Contrase\xf1a",variant:"outlined",helperText:p.password?p.password.message:null,error:p.password}))},control:d,defaultValue:"",rules:{required:"Required"}}),Object(N.jsxs)("div",{className:r.loginButtonContainer,children:[Object(N.jsx)(f.a,{variant:"contained",color:"secondary",className:r.blueButton,type:"submit",disabled:Object.keys(p).length>0,children:"Iniciar Sesi\xf3n"}),Object(N.jsx)("span",{children:"\xf3"}),Object(N.jsx)(f.a,{variant:"contained",color:"secondary",onClick:h,className:r.whiteButton,children:"Iniciar Sesi\xf3n con Google"}),Object(N.jsx)(f.a,{variant:"contained",color:"secondary",onClick:h,className:r.whiteButton,children:"Iniciar Sesi\xf3n con Facebook"})]})]})})]})},D=Object(p.a)((function(e){return{root:{"& > *":{margin:e.spacing(1),width:"300px"},display:"flex",flexDirection:"column",alignItems:"center"},registerButtonContainer:{display:"flex",flexDirection:"column",alignItems:"center","& > *":{marginBottom:"10px"},"& > Button":{borderRadius:"5px",padding:"10px 15px",width:"300px",fontWeight:"500",boxShadow:"rgba(0,0,0,0.2) 1px 1px 5px 0"}}}})),E=function(e){var t=e.onClose,n=e.open,a=D(),r=Object(w.b)(),o=r.control,c=r.handleSubmit,s=r.errors,i=function(){};return Object(N.jsxs)(x.a,{onClose:function(){t({hola:"12"})},"aria-labelledby":"simple-dialog-title",open:n,children:[Object(N.jsx)(g.a,{id:"simple-dialog-title",children:"Registrarse"}),Object(N.jsx)(v.a,{children:Object(N.jsxs)("form",{className:a.root,noValidate:!0,autoComplete:"off",onSubmit:c((function(e){console.log("hola",e)})),children:[Object(N.jsx)(w.a,{name:"names",render:function(e){var t=e.field;return Object(N.jsx)(y.a,Object(l.a)(Object(l.a)({},t),{},{id:"names",name:"names",label:"Nombre completo",variant:"outlined",helperText:(null===s||void 0===s?void 0:s.names)?null===s||void 0===s?void 0:s.names.message:null,error:null===s||void 0===s?void 0:s.names}))},control:o,defaultValue:"",rules:{required:"Required"}}),Object(N.jsx)(w.a,{name:"email",render:function(e){var t=e.field;return Object(N.jsx)(y.a,Object(l.a)(Object(l.a)({},t),{},{id:"email",name:"email",label:"Email",variant:"outlined",helperText:(null===s||void 0===s?void 0:s.email)?null===s||void 0===s?void 0:s.email.message:null,error:null===s||void 0===s?void 0:s.email}))},control:o,defaultValue:"",rules:{required:"Required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,message:"invalid email address"}}}),Object(N.jsx)(w.a,{name:"password",render:function(e){var t=e.field;return Object(N.jsx)(y.a,Object(l.a)(Object(l.a)({},t),{},{id:"password",name:"password",label:"Contrase\xf1a",variant:"outlined",helperText:(null===s||void 0===s?void 0:s.password)?null===s||void 0===s?void 0:s.password.message:null,error:null===s||void 0===s?void 0:s.password}))},control:o,defaultValue:"",rules:{required:"Required"}}),Object(N.jsx)(w.a,{name:"password2",render:function(e){var t=e.field;return Object(N.jsx)(y.a,Object(l.a)(Object(l.a)({},t),{},{id:"password2",name:"password2",label:"Repetir contrase\xf1a",variant:"outlined",helperText:(null===s||void 0===s?void 0:s.password2)?null===s||void 0===s?void 0:s.password2.message:null,error:null===s||void 0===s?void 0:s.password2}))},control:o,defaultValue:"",rules:{required:"Required"}}),Object(N.jsxs)("div",{className:a.registerButtonContainer,children:[Object(N.jsx)(f.a,{variant:"contained",color:"secondary",type:"submit",children:"Registrate"}),Object(N.jsx)("span",{children:"o"}),Object(N.jsx)(f.a,{variant:"contained",color:"secondary",onClick:i,children:"Google"}),Object(N.jsx)(f.a,{variant:"contained",color:"secondary",onClick:i,children:"Facebook"})]})]})})]})},A=Object(p.a)((function(){return{buttonContainer:{marginTop:"60px",display:"flex",flexDirection:"column",alignItems:"center","& > Button":{borderRadius:"5px",padding:"10px 15px",width:"300px",fontWeight:"500",boxShadow:"rgba(0,0,0,0.2) 1px 1px 5px 0"},"& > Button:first-child":{marginBottom:"10px"}},loginButton:{backgroundColor:"#E4445A",color:"white","&:hover":{backgroundColor:"#E4445A"}},registerButton:{backgroundColor:"#37699C",color:"white","&:hover":{backgroundColor:"#37699C"}},title:{textAlign:"center"}}})),I=function(){var e=A(),t=r.a.useState(!1),n=Object(s.a)(t,2),a=n[0],o=n[1],c=r.a.useState(!1),i=Object(s.a)(c,2),l=i[0],u=i[1];console.log("something",{openLogin:a,openRegister:l});return Object(N.jsxs)("div",{className:"auth-container",children:[Object(N.jsx)("div",{className:"part1",style:{backgroundImage:"url('".concat("/mi-chanchito-front","/images/portada.png')")}}),Object(N.jsx)("div",{className:"part2",children:Object(N.jsxs)("div",{className:"part2-content",children:[Object(N.jsx)("h1",{className:e.title,children:"Administra tu dinero de forma efectiva"}),Object(N.jsxs)("div",{className:e.buttonContainer,children:[Object(N.jsx)(f.a,{variant:"contained",color:"primary",onClick:function(){o(!0)},className:e.loginButton,children:"Iniciar Sesi\xf3n"}),Object(N.jsx)(f.a,{variant:"contained",color:"secondary",onClick:function(){u(!0)},className:e.registerButton,children:"Registrarse"})]})]})}),Object(N.jsx)(B,{open:a,onClose:function(e){console.log("hola",e),o(!1)}}),Object(N.jsx)(E,{open:l,onClose:function(e){console.log("hola",e),u(!1)}})]})},q=function(){return console.log("hey you"),Object(N.jsxs)("div",{children:[Object(N.jsx)("h1",{children:"Hola estamos en el home"}),Object(N.jsx)("h2",{children:"Bienvenido a mi chanchito"}),Object(N.jsx)(j.b,{to:"/auth",children:"Auth"})]})},R=n(163),_=n(164),M=n(165),L=n(60),P=n(89),V=n(161),J=n(171),U=n(157),z=n(119),W=n(166),Z=n(167),G=n(168),Y=n(88),$=n.n(Y),H=n(55),K=n.n(H),Q=n(20),X=n(15),ee=function(e){var t=function(e){var t=e.filter((function(e){return e.cashFlow===X.cashFlowLabels.ingreso})).reduce((function(e,t){return e+t.amount}),0),n=e.filter((function(e){return e.cashFlow===X.cashFlowLabels.egreso})).reduce((function(e,t){return e+t.amount}),0);return[{label:"Ingresos",amount:t},{label:"Egresos",amount:n},{label:"Balance",amount:t-n}]}(e.data);return console.log("cambio"),Object(N.jsx)("div",{className:"card balance-card",children:t.map((function(e){return Object(N.jsxs)("div",{className:"balance-card__item",children:[Object(N.jsx)("div",{children:e.label}),Object(N.jsx)("span",{className:"spacer"}),Object(N.jsx)("div",{children:"S/. ".concat(e.amount)})]},e.label)}))})},te=n(159),ne=(n(113),n(68)),ae=Object(p.a)((function(){return{header:{display:"flex",margin:"20px 0"},actionsBtn:{display:"flex",alignItems:"center",transition:"transform 200ms ease"}}})),re=function(e){var t,n,a=e.transfer,r=e.transferCardEvent,o=ae();switch(a.cashFlow){case X.cashFlowLabels.ingreso:t=Object(N.jsx)("div",{className:"transfer-card__label ".concat(X.cashFlowLabels.ingreso),children:"Ingreso"}),n=Object(N.jsx)("div",{children:"+ S/. ".concat(a.amount)});break;case X.cashFlowLabels.egreso:t=Object(N.jsx)("div",{className:"transfer-card__label ".concat(X.cashFlowLabels.egreso),children:"Egreso"}),n=Object(N.jsx)("div",{children:"- S/. ".concat(a.amount)})}return Object(N.jsxs)("div",{className:"card transfer-card",children:[Object(N.jsxs)("div",{className:o.header,children:[Object(N.jsx)("div",{children:a.description}),Object(N.jsx)("span",{className:"spacer"}),n,t]}),Object(N.jsx)(te.a,{}),Object(N.jsxs)("div",{className:o.actionsBtn,children:[Object(N.jsx)("div",{children:Object(ne.formatDate)(a.dateTransfer)}),Object(N.jsx)("span",{className:"spacer"}),Object(N.jsx)(f.a,{onClick:function(){r({type:X.eventsTransferCard.update,payload:a})},color:"primary",autoFocus:!0,children:"Actualizar"}),Object(N.jsx)(f.a,{onClick:function(){r({type:X.eventsTransferCard.delete,payload:a})},color:"primary",autoFocus:!0,children:"Eliminar"})]})]})},oe=n(26),ce=n(160),se=n(170),ie=n(162),le=Object(p.a)((function(e){return{root:{"& > *":{margin:e.spacing(1)}},createBtn:{},updateBtn:{},form:{"& > *":{margin:e.spacing(1),minWidth:"300px"},display:"flex",flexDirection:"column",alignItems:"center"}}})),ue=function(e){var t=e.open,n=e.actionTransfer,r=e.transferDialogEvent,o=e.transferData;console.log("transferData",o);var c=le(),s=Object(oe.a)(),i=Object(ce.a)(s.breakpoints.down("sm")),u=Object(w.b)(),d=u.control,j=u.formState.errors,b=u.getValues,p=u.setValue;Object(a.useEffect)((function(){console.log("initiiii",o),t&&(console.log("abriendo"),p("description",o.description),p("details",o.details),p("amount",o.amount),p("dateTransfer",Object(ne.formatInputDate)(o.dateTransfer)),p("cashFlow",o.cashFlow))}),[t]);var h,k=function(){r({type:X.eventsTransferDialog.close,payload:{}})},T=function(e){r({type:X.eventsTransferDialog.create,payload:e})},C=function(e){r({type:X.eventsTransferDialog.update,payload:Object(l.a)(Object(l.a)({},e),{},{_id:o._id})})},S=function(){var e=Object(O.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("data",t),e.t0=n,e.next=e.t0===X.actionsTransfer.create?4:e.t0===X.actionsTransfer.update?6:8;break;case 4:return T(t),e.abrupt("break",9);case 6:return C(t),e.abrupt("break",9);case 8:return e.abrupt("break",9);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();switch(n){case X.actionsTransfer.create:h=Object(N.jsx)(N.Fragment,{children:Object(N.jsx)(f.a,{onClick:function(){return S(b())},color:"primary",autoFocus:!0,className:c.createBtn,children:"Crear"})});break;case X.actionsTransfer.update:h=Object(N.jsx)(N.Fragment,{children:Object(N.jsx)(f.a,{onClick:function(){return S(b())},color:"primary",autoFocus:!0,className:c.updateBtn,children:"Actualizar"})})}return Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)(x.a,{fullScreen:i,open:t,onClose:k,"aria-labelledby":"responsive-dialog-title",children:[Object(N.jsx)(g.a,{id:"responsive-dialog-title",children:"Agregar una nueva transferencia"}),Object(N.jsx)(v.a,{children:Object(N.jsxs)("form",{className:c.form,noValidate:!0,autoComplete:"off",children:[Object(N.jsx)(w.a,{name:"description",render:function(e){var t=e.field;return Object(N.jsx)(y.a,Object(l.a)(Object(l.a)({},t),{},{id:"description",name:"description",label:"Descripcion",variant:"outlined",helperText:j.description?j.description.message:null,error:j.description}))},control:d,defaultValue:"",rules:{required:"Required"}}),Object(N.jsx)(w.a,{name:"details",render:function(e){var t=e.field;return Object(N.jsx)(y.a,Object(l.a)(Object(l.a)({},t),{},{id:"details",name:"details",label:"Detalles",variant:"outlined",multiline:!0,rows:4,helperText:j.details?j.details.message:null,error:j.details}))},control:d,defaultValue:"",rules:{required:"Required"}}),Object(N.jsx)(w.a,{name:"amount",render:function(e){var t=e.field;return Object(N.jsx)(y.a,Object(l.a)(Object(l.a)({},t),{},{id:"amount",type:"number",name:"amount",label:"Monto",variant:"outlined",helperText:j.amount?j.amount.message:null,error:j.amount}))},control:d,defaultValue:"",rules:{required:"Required"}}),Object(N.jsx)(w.a,{name:"dateTransfer",render:function(e){var t=e.field;return Object(N.jsx)(y.a,Object(l.a)(Object(l.a)({},t),{},{id:"dateTransfer",name:"dateTransfer",type:"date",label:"Fecha transferencia",variant:"outlined",helperText:j.dateTransfer?j.dateTransfer.message:null,error:j.dateTransfer,InputLabelProps:{shrink:!0}}))},control:d,defaultValue:"",rules:{required:"Required"}}),Object(N.jsx)(w.a,{name:"cashFlow",render:function(e){var t=e.field;return Object(N.jsxs)(se.a,Object(l.a)(Object(l.a)({},t),{},{id:"cashFlow",name:"cashFlow",variant:"outlined",children:[Object(N.jsx)(V.a,{value:"ingreso",children:"Ingreso"}),Object(N.jsx)(V.a,{value:"egreso",children:"Egreso"})]}))},control:d,defaultValue:"",rules:{required:"Required"}})]})}),Object(N.jsxs)(ie.a,{children:[Object(N.jsx)(f.a,{autoFocus:!0,onClick:k,color:"primary",children:"Cancelar"}),h]})]})})},de=n(54),je=Object(p.a)((function(e){return{root:{"& > *":{margin:e.spacing(1)}},description:{}}})),be=function(e){var t=e.open,n=e.confirmModalData,a=e.confirmModalEvent,r=je(),o=Object(oe.a)(),c=Object(ce.a)(o.breakpoints.down("sm")),s=function(){a({type:de.typesConfirmModal.close,payload:{}})};return console.log("opened",{confirmModalData:n,open:t,confirmModalEvent:a}),Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)(x.a,{fullScreen:c,open:t,onClose:s,"aria-labelledby":"responsive-dialog-title",children:[Object(N.jsx)(g.a,{id:"responsive-dialog-title",children:n.title}),Object(N.jsx)(v.a,{children:Object(N.jsx)("span",{className:r.description,children:n.description})}),Object(N.jsxs)(ie.a,{children:[Object(N.jsx)(f.a,{autoFocus:!0,onClick:s,color:"primary",children:"Cancelar"}),Object(N.jsx)(f.a,{autoFocus:!0,onClick:function(){a({type:de.typesConfirmModal.confirm,payload:n.idData})},color:"primary",children:"Confirmar"})]})]})})},pe=function(){function e(){Object(k.a)(this,e),this.path="transfer"}return Object(T.a)(e,[{key:"getAllTransfers",value:function(){var e=this;return new Promise(function(){var t=Object(O.a)(m.a.mark((function t(n){var a,r,o,c,s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,a=JSON.parse(localStorage.getItem("user"))){t.next=4;break}throw new Error("No hay un usuario");case 4:return r=a.token,t.next=7,fetch("".concat(C.backendUrl,"/").concat(e.path,"/all"),{method:"GET",headers:{Authorization:r}});case 7:return o=t.sent,t.next=10,o.json();case 10:return c=t.sent,s=c.response,console.log("data ",s),t.abrupt("return",n({success:!0,payload:s}));case 16:return t.prev=16,t.t0=t.catch(0),t.abrupt("return",n({error:t.t0}));case 19:case"end":return t.stop()}}),t,null,[[0,16]])})));return function(e){return t.apply(this,arguments)}}())}},{key:"createTransfer",value:function(e){var t=this,n=e.details,a=e.description,r=e.amount,o=e.dateTransfer,c=e.cashFlow;return new Promise(function(){var e=Object(O.a)(m.a.mark((function e(s){var i,l,u,d,j;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i=JSON.parse(localStorage.getItem("user"))){e.next=4;break}throw new Error("No hay un usuario");case 4:return l=i.token,u={details:n,description:a,amount:r,dateTransfer:o,cashFlow:c},e.next=8,fetch("".concat(C.backendUrl,"/").concat(t.path,"/create"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:l},body:JSON.stringify(u)});case 8:return d=e.sent,e.next=11,d.json();case 11:return j=e.sent,console.log("data ",j),e.abrupt("return",s({success:!0,payload:j}));case 16:return e.prev=16,e.t0=e.catch(0),e.abrupt("return",s({error:e.t0}));case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}())}},{key:"updateTransfer",value:function(e){var t=this,n=e.details,a=e.description,r=e.amount,o=e.dateTransfer,c=e.cashFlow,s=e.idTransfer;return new Promise(function(){var e=Object(O.a)(m.a.mark((function e(i){var l,u,d,j,b;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,l=JSON.parse(localStorage.getItem("user"))){e.next=4;break}throw new Error("No hay un usuario");case 4:return u=l.token,console.log("idTransfer",s),d={details:n,description:a,amount:r,dateTransfer:o,cashFlow:c,_id:s},e.next=9,fetch("".concat(C.backendUrl,"/").concat(t.path,"/update"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:u},body:JSON.stringify(d)});case 9:return j=e.sent,e.next=12,j.json();case 12:return b=e.sent,console.log("data ",b),e.abrupt("return",i({success:!0,payload:b}));case 17:return e.prev=17,e.t0=e.catch(0),e.abrupt("return",i({error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t){return e.apply(this,arguments)}}())}},{key:"deleteTransfer",value:function(e){var t=this,n=e.idTransfer;return new Promise(function(){var e=Object(O.a)(m.a.mark((function e(a){var r,o,c,s,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=JSON.parse(localStorage.getItem("user"))){e.next=4;break}throw new Error("No hay un usuario");case 4:return o=r.token,c={idTransfer:n},e.next=8,fetch("".concat(C.backendUrl,"/").concat(t.path,"/delete"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:o},body:JSON.stringify(c)});case 8:return s=e.sent,e.next=11,s.json();case 11:return i=e.sent,console.log("data ",i),e.abrupt("return",a({success:!0,payload:i}));case 16:return e.prev=16,e.t0=e.catch(0),e.abrupt("return",a({error:e.t0}));case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}())}}]),e}(),fe=Object(p.a)((function(e){return{root:{"& > *":{margin:e.spacing(1)}},addBtn:{width:"100%",margin:"20px 0"},menuButton:{marginRight:e.spacing(2)},fullList:{width:"100vw"},list:{width:250},title:{flexGrow:1}}})),he=function(){var e=new pe,t=fe(),n=Object(a.useState)(!1),r=Object(s.a)(n,2),o=r[0],c=r[1],i=Object(a.useState)(!1),u=Object(s.a)(i,2),d=u[0],j=u[1],b=Object(a.useState)(X.actionsTransfer.create),p=Object(s.a)(b,2),h=p[0],x=p[1],g=Object(a.useState)({title:"",description:""}),v=Object(s.a)(g,2),y=v[0],w=v[1],k=Object(a.useState)({}),T=Object(s.a)(k,2),C=T[0],S=T[1],F=Object(a.useState)([]),B=Object(s.a)(F,2),D=B[0],E=B[1];Object(a.useEffect)(Object(O.a)(m.a.mark((function t(){var n,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getAllTransfers();case 2:n=t.sent,a=n.payload,console.log("payload",a),E(a);case 6:case"end":return t.stop()}}),t)}))),[]);var A=function(){var t=Object(O.a)(m.a.mark((function t(n){var a,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.createTransfer(n);case 2:a=t.sent,r=a.payload,c(!1),E([r.response].concat(Object(Q.a)(D)));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),I=function(){var t=Object(O.a)(m.a.mark((function t(n){var a,r,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.updateTransfer(Object(l.a)(Object(l.a)({},n),{},{idTransfer:n._id}));case 2:a=t.sent,r=a.payload,console.log("que me da de payload",r),console.log("data._id",n._id),c(!1),o=D.map((function(e){return e._id===n._id?Object(l.a)({},r.response):Object(l.a)({},e)})),console.log("newDataTransfer",o),E(Object(Q.a)(o));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),q=function(){var t=Object(O.a)(m.a.mark((function t(n){var a,r,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.idTransfer,t.next=3,e.deleteTransfer({idTransfer:a});case 3:r=t.sent,o=r.payload,console.log({payload:o}),j(!1),E(Object(Q.a)(D.filter((function(e){return a!==e._id}))));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),R=function(e){var t=e.type,n=e.payload;switch(t){case X.eventsTransferCard.update:x(X.actionsTransfer.update),c(!0),S(n);break;case X.eventsTransferCard.delete:j(!0),w({title:"Estas seguro de eliminar esta transferencia?",description:"No vas a poder recuperarla luego",idData:n._id})}};return Object(N.jsxs)("div",{children:[Object(N.jsx)(ee,{data:D}),Object(N.jsx)(f.a,{variant:"contained",color:"primary",className:t.addBtn,onClick:function(){x(X.actionsTransfer.create),c(!0),S({})},children:"Agregar"}),D.map((function(e){return Object(N.jsx)(re,{transfer:e,transferCardEvent:R},e._id)})),Object(N.jsx)(ue,{open:o,actionTransfer:h,transferDialogEvent:function(e){var t=e.type,n=e.payload;switch(t){case X.eventsTransferDialog.close:c(!1);break;case X.eventsTransferDialog.create:A(n);break;case X.eventsTransferDialog.update:I(n)}},transferData:C}),Object(N.jsx)(be,{open:d,confirmModalEvent:function(e){var t=e.type,n=e.payload;switch(console.log("payload",n),t){case de.typesConfirmModal.close:j(!1);break;case de.typesConfirmModal.confirm:q({idTransfer:n})}},confirmModalData:y})]})},me=function(){return console.log("hey"),Object(N.jsx)(N.Fragment,{children:Object(N.jsx)("h1",{children:"este es el perfil"})})},Oe=function(){return console.log("hol"),Object(N.jsx)("div",{children:Object(N.jsx)("h1",{children:"En esta pagina ira en balance general"})})},xe=function(){return console.log("hola"),Object(N.jsx)(N.Fragment,{children:Object(N.jsx)("hi",{children:"Aqui ira el calculo de las fechas y montos de tarjetas de credito"})})},ge=Object(p.a)((function(e){return{root:{"& > *":{margin:e.spacing(1)}},addBtn:{width:"100%",margin:"20px 0"},menuButton:{marginRight:e.spacing(2)},fullList:{width:250},list:{width:250},title:{flexGrow:1},container:{backgroundColor:"#f5f5f5"}}})),ve=function(){var e=ge(),t=Object(b.h)(),n=t.path,r=t.url,o=Object(a.useState)(!1),c=Object(s.a)(o,2),i=c[0],l=c[1],u=Object(a.useState)(null),d=Object(s.a)(u,2),p=d[0],f=d[1],h=Boolean(p),m=function(e){return function(t){(!t||"keydown"!==t.type||"Tab"!==t.key&&"Shift"!==t.key)&&l(e)}},O=function(){f(null)};return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(R.a,{position:"static",children:Object(N.jsxs)(_.a,{variant:"dense",children:[Object(N.jsx)(M.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu",onClick:m(!0),children:Object(N.jsx)(K.a,{})}),Object(N.jsx)(L.a,{variant:"h6",color:"inherit",className:e.title,children:"Mi chanchito"}),Object(N.jsxs)("div",{children:[Object(N.jsx)(M.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){f(e.currentTarget)},color:"inherit",children:Object(N.jsx)($.a,{})}),Object(N.jsx)(P.a,{id:"menu-appbar",anchorEl:p,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:h,onClose:O,children:Object(N.jsx)(V.a,{onClick:O,children:"Cerrar sesion"})})]})]})}),Object(N.jsx)(J.a,{anchor:"left",open:i,onClose:m(!1),onOpen:m(!0),children:Object(N.jsx)("div",{className:e.fullList,children:Object(N.jsxs)(U.a,{children:[Object(N.jsxs)(z.a,{button:!0,component:j.b,to:"".concat(r,"/perfil"),children:[Object(N.jsx)(W.a,{children:Object(N.jsx)(K.a,{})}),Object(N.jsx)(Z.a,{primary:"Perfil"})]}),Object(N.jsxs)(z.a,{button:!0,component:j.b,to:"".concat(r,"/home"),children:[Object(N.jsx)(W.a,{children:Object(N.jsx)(K.a,{})}),Object(N.jsx)(Z.a,{primary:"Inicio"})]}),Object(N.jsxs)(z.a,{button:!0,component:j.b,to:"".concat(r,"/general-balance"),children:[Object(N.jsx)(W.a,{children:Object(N.jsx)(K.a,{})}),Object(N.jsx)(Z.a,{primary:"Balance general"})]}),Object(N.jsxs)(z.a,{button:!0,component:j.b,to:"".concat(r,"/credit"),children:[Object(N.jsx)(W.a,{children:Object(N.jsx)(K.a,{})}),Object(N.jsx)(Z.a,{primary:"Credito"})]})]})})}),Object(N.jsx)("div",{className:e.container,children:Object(N.jsx)(G.a,{fixed:!0,maxWidth:"md",children:Object(N.jsxs)(b.d,{children:[Object(N.jsx)(b.b,{exact:!0,path:"".concat(n,"/home"),children:Object(N.jsx)(he,{})}),Object(N.jsx)(b.b,{path:"".concat(n,"/perfil"),children:Object(N.jsx)(me,{})}),Object(N.jsx)(b.b,{path:"".concat(n,"/general-balance"),children:Object(N.jsx)(Oe,{})}),Object(N.jsx)(b.b,{path:"".concat(n,"/credit"),children:Object(N.jsx)(xe,{})}),Object(N.jsx)(b.b,{path:"*",children:Object(N.jsx)(he,{})})]})})})]})},ye=n(69),we=function(e){var t=e.isAuthenticated,n=e.component,a=Object(ye.a)(e,["isAuthenticated","component"]);return console.log("gg"),Object(N.jsx)(b.b,Object(l.a)(Object(l.a)({},a),{},{component:function(e){return t?Object(N.jsx)(n,Object(l.a)({},e)):Object(N.jsx)(b.a,{to:"/auth"})}}))},ke=function(e){var t=e.isAuthenticated,n=e.component,a=Object(ye.a)(e,["isAuthenticated","component"]);return console.log("dd"),Object(N.jsx)(b.b,Object(l.a)(Object(l.a)({},a),{},{component:function(e){return t?Object(N.jsx)(b.a,{to:"/dashboard"}):Object(N.jsx)(n,Object(l.a)({},e))}}))},Te=function(){console.log("router");var e=Object(a.useContext)(i).user;return console.log("user",e),Object(N.jsx)(N.Fragment,{children:Object(N.jsx)(j.a,{children:Object(N.jsx)("div",{children:Object(N.jsxs)(b.d,{children:[Object(N.jsx)(ke,{path:"/auth",isAuthenticated:!!e.token,component:I}),Object(N.jsx)(we,{path:"/dashboard",isAuthenticated:!!e.token,component:ve}),Object(N.jsx)(ke,{path:"/",isAuthenticated:!!e.token,component:q})]})})})})},Ce=function(){return JSON.parse(localStorage.getItem("user"))||{logged:!1}};var Se=function(){var e=Object(a.useReducer)(d,{},Ce),t=Object(s.a)(e,2),n=t[0],r=t[1];return Object(N.jsx)(i.Provider,{value:{user:n,dispatch:r},children:Object(N.jsx)(Te,{})})},Ne=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,173)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),o(e),c(e)}))};c.a.render(Object(N.jsx)(Se,{}),document.getElementById("root")),Ne()},15:function(e,t){t.cashFlowLabels={ingreso:"ingreso",egreso:"egreso"},t.actionsTransfer={create:"[actionsTransfer] create",update:"[actionsTransfer] update"},t.eventsTransferDialog={create:"[eventsTransferDialog] create",update:"[eventsTransferDialog] update",close:"[eventsTransferDialog] close"},t.eventsTransferCard={update:"[eventsTransferCard] update",delete:"[eventsTransferCard] delete"}},54:function(e,t){t.typesConfirmModal={close:"[confirmModalEvents] close",confirm:"[confirmModalEvents] confirm"}},68:function(e,t){var n=function(e){return e<=9?"0".concat(e):e};t.formatInputDate=function(e){var t=new Date(e),a=t.getFullYear(),r=n(t.getMonth()+1),o=n(t.getDate());return"".concat(a,"-").concat(r,"-").concat(o)},t.formatDate=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",a=new Date(e),r=a.getFullYear(),o=n(a.getMonth()+1),c=n(a.getDate());return"".concat(c).concat(t).concat(o).concat(t).concat(r)}},80:function(e,t,n){}},[[115,1,2]]]);
//# sourceMappingURL=main.36a5c30b.chunk.js.map